spring:
  profiles:
    active: ${SPRING_PROFILES_ACTIVE:local}
    include: secret

  data:
    redis:
      host: ${REDIS_HOST:localhost}
      port: 6379

  security:
    oauth2:
      client:
        registration:
          google:
            client-id: ${GOOGLE_CLIENT_ID:}
            client-secret: ${GOOGLE_CLIENT_SECRET:}
            scope: [email, profile]
            redirect-uri: "{baseUrl}/login/oauth2/code/{registrationId}"
        provider:
          google:
            authorization-uri: https://accounts.google.com/o/oauth2/v2/auth
            token-uri: https://oauth2.googleapis.com/token
            user-info-uri: https://www.googleapis.com/oauth2/v3/userinfo
            user-name-attribute: sub

  cloud:
    aws:
      s3:
        bucket: ${S3_BUCKET_NAME:}
        base-url: https://%s.s3.%s.amazonaws.com/
        region: ap-northeast-2
      credentials:
        access-key: ${S3_ACCESS_KEY:}
        secret-key: ${S3_SECRET_KEY:}
      region:
        static: ap-northeast-2
      stack:
        auto: false

  jpa:
    database-platform: org.hibernate.dialect.MySQLDialect

jwt:
  cookie-name: accessToken
  cookie-max-age: 3600
  cookie-secure: false // 이렇게 하면 HTTP에서도 쿠키 보낼 수 있는데 일단 그냥 해
  secret: ${JWT_SECRET:}
  expiration: 86400000
  refresh-expiration: 604800000

app:
  oauth2:
    redirect-uri:
      audience: ${APP_OAUTH2_REDIRECT_URI_AUDIENCE:http://localhost:5173/auth/callback}
      organizer: ${APP_OAUTH2_REDIRECT_URI_ORGANIZER:http://localhost:5174/auth/callback}
    onboarding-uri:
      audience: ${APP_OAUTH2_ONBOARDING_URI_AUDIENCE:http://localhost:5173/onboarding}
      organizer: ${APP_OAUTH2_ONBOARDING_URI_ORGANIZER:http://localhost:5174/onboarding}
    failure-redirect-uri: ${APP_OAUTH2_FAILURE_REDIRECT_URI:http://localhost:5173/login}

  cors:
    # ✅ 공통은 로컬만 기본값으로 두고, prod에서 덮어쓴다
    allowed-origins: ${APP_CORS_ALLOWED_ORIGINS:http://localhost:3000,http://localhost:5173,http://localhost:5174,http://localhost:8080}
    allowed-methods: ${APP_CORS_ALLOWED_METHODS:GET,POST,PUT,DELETE,PATCH,OPTIONS}
    allowed-headers: ${APP_CORS_ALLOWED_HEADERS:*}
    allow-credentials: ${APP_CORS_ALLOW_CREDENTIALS:true}

server:
  port: 8080

management:
  endpoints:
    web:
      exposure:
        include: health

fcm:
  config-64: ${FIRE_BASE_CONFIG_64:}
  key:
    path: firebase/amp-firebase-adminsdk.json
    scope: https://www.googleapis.com/auth/cloud-platform
  api:
    url: https://fcm.googleapis.com/v1/projects/${FCM_PROJECT_ID}/messages:send
